{{/* Sender methods template - shared between client and initiator */}}

{{- range .Operations }}
{{- $op := . }}
{{- $opid := .GoOperationID }}
{{- $hasParams := .HasParams }}
{{- $pathParams := .PathParams }}
{{- $paramsTypeName := .ParamsTypeName }}

// {{ $opid }}{{ if .HasBody }}WithBody{{ end }}{{ if $.IsClient }} makes a {{ .Method }} request to {{ .Path }}{{ else }} sends a {{ .Method }} {{ $.PrefixLower }} request{{ end }}
{{ if .Summary }}// {{ .Summary }}{{ end }}
func ({{ $.Receiver }} *{{ $.TypeName }}) {{ $opid }}{{ if .HasBody }}WithBody{{ end }}(ctx context.Context{{ if $.IsClient }}{{ range $pathParams }}, {{ .GoVariableName }} {{ .TypeDecl }}{{ end }}{{ else }}, targetURL string{{ end }}{{ if $hasParams }}, params *{{ $paramsTypeName }}{{ end }}{{ if .HasBody }}, contentType string, body io.Reader{{ end }}, reqEditors ...RequestEditorFn) (*http.Response, error) {
	req, err := New{{ $opid }}{{ $.Prefix }}Request{{ if .HasBody }}WithBody{{ end }}({{ if $.IsClient }}{{ $.Receiver }}.Server{{ range $pathParams }}, {{ .GoVariableName }}{{ end }}{{ else }}targetURL{{ end }}{{ if $hasParams }}, params{{ end }}{{ if .HasBody }}, contentType, body{{ end }})
	if err != nil {
		return nil, err
	}
	req = req.WithContext(ctx)
	if err := {{ $.Receiver }}.applyEditors(ctx, req, reqEditors); err != nil {
		return nil, err
	}
	return {{ $.Receiver }}.Client.Do(req)
}
{{- range .Bodies }}
{{- if .GenerateTyped }}

// {{ $opid }}{{ .FuncSuffix }}{{ if $.IsClient }} makes a {{ $op.Method }} request to {{ $op.Path }} with {{ .ContentType }} body{{ else }} sends a {{ $op.Method }} {{ $.PrefixLower }} request with {{ .ContentType }} body{{ end }}
func ({{ $.Receiver }} *{{ $.TypeName }}) {{ $opid }}{{ .FuncSuffix }}(ctx context.Context{{ if $.IsClient }}{{ range $pathParams }}, {{ .GoVariableName }} {{ .TypeDecl }}{{ end }}{{ else }}, targetURL string{{ end }}{{ if $hasParams }}, params *{{ $paramsTypeName }}{{ end }}, body {{ .GoTypeName }}, reqEditors ...RequestEditorFn) (*http.Response, error) {
	req, err := New{{ $opid }}{{ $.Prefix }}Request{{ .FuncSuffix }}({{ if $.IsClient }}{{ $.Receiver }}.Server{{ range $pathParams }}, {{ .GoVariableName }}{{ end }}{{ else }}targetURL{{ end }}{{ if $hasParams }}, params{{ end }}, body)
	if err != nil {
		return nil, err
	}
	req = req.WithContext(ctx)
	if err := {{ $.Receiver }}.applyEditors(ctx, req, reqEditors); err != nil {
		return nil, err
	}
	return {{ $.Receiver }}.Client.Do(req)
}
{{- end }}
{{- end }}
{{- end }}
